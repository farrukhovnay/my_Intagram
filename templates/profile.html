{% extends 'base.html' %}
{% block content %}
<style>
    body {
        font-family: Arial, sans-serif;
        background: #fafafa;
        margin: 0;
        padding: 0;
    }

    .profile-container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
        text-align: center;
    }

    .profile-avatar {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    h1 {
        margin: 10px 0;
    }

    .stats {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 15px;
        font-size: 16px;
    }

    .follow-btn, .unfollow-btn, .message-btn {
        border: none;
        padding: 8px 20px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        font-weight: bold;
        text-decoration: none;
        transition: 0.2s;
        display: inline-block;
        margin: 5px;
    }

    .follow-btn {
        background: #0095f6;
        color: white;
    }
    .follow-btn:hover {
        background: #007acc;
    }

    .unfollow-btn {
        background: #efefef;
        color: black;
    }
    .unfollow-btn:hover {
        background: #dbdbdb;
    }

    .message-btn {
        background: #0095f6;
        color: white;
    }
    .message-btn:hover {
        background: #007acc;
    }

    .posts-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        margin-top: 20px;
    }

    .post-item img {
        width: 100%;
        height: 300px;
        object-fit: cover;
    }

</style>

<div class="profile-container">
    {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="Avatar" class="profile-avatar">
    {% else %}
        <img src="https://via.placeholder.com/150" alt="Avatar" class="profile-avatar">
    {% endif %}

    <h1>{{ profile_user.username }}</h1>
    <p>{{ profile.bio }}</p>

    <div class="stats">
        <div>{{ profile.followers.count }} Followers</div>
        <div>{{ profile.following.count }} Following</div>
    </div>

    {% if request.user != profile_user %}
        {% if is_following %}
            <a href="{% url 'unfollow_user' profile_user.username %}" class="unfollow-btn">Unfollow</a>
        {% else %}
            <a href="{% url 'follow_user' profile_user.username %}" class="follow-btn">Follow</a>
        {% endif %}

        
        <a href="{% url 'dm_thread' profile_user.username %}" class="message-btn">Message</a>
    {% endif %}

    <div class="posts-grid">
        {% if posts %}
            {% for post in posts %}
                <div class="post-item">
                    <a href="{% url 'detail' post.id %}">
                        <img src="{{ post.image.url }}" alt="Post">
                    </a>
                </div>
            {% endfor %}
        {% else %}
            <p>No posts yet</p>
        {% endif %}
    </div>
</div>
{% endblock %}



